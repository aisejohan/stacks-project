\input{preamble}

% OK, start here.
%
\begin{document}

\title{Relative Cycles}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents



\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we briefly explain how to get a theory of relative cycles
very similar to the one in \cite{SV}; the precise relationship between the
definitions will be explained in Remark \ref{remark-compare-SV}.



\section{Cycles relative to fields}
\label{section-relative-fields}

\noindent
Let $k$ be a field. Let $X$ be a locally algebraic scheme over $k$.
Let $r \geq 0$ be an integer. In this setting we have the group
$Z_r(X)$ of $r$-cycles on $X$.

\medskip\noindent
Change of fields. For any field extension $k'/k$ there is a base change or
pullback map $Z_r(X) \to CH_r(X_{k'})$, see
Chow Homology, Section \ref{chow-section-change-base}.
Briefly, given an integral closed subscheme $Z \subset X$
of dimension $r$ we send $[Z] \in Z_r(X)$ to the $r$-cycle
$[Z_{k'}]_r \in Z_r(X_{k'})$ associated to the closed subscheme
$Z_{k'} \subset X_{k'}$ (of course in general $Z_{k'}$
is neither irreducible nor reduced).

\begin{remark}
\label{remark-how-different}
Let $k$ be a field of characteristic $p > 0$ with perfect closure $k^{perf}$.
Let $X$ be a locally algebraic scheme over $k$. Let $r \geq 0$ be an integer.
The map
$$
Z_r(X) \otimes_\mathbf{Z} \mathbf{Z}[1/p]
\longrightarrow
Z_r(X_{k^{perf}}) \otimes_\mathbf{Z} \mathbf{Z}[1/p]
$$
is an isomorphism. Even the example of $X = \mathbf{A}^1_k$
over $k = \mathbf{F}_p(t)$ shows that the cokernel of
$Z_r(X) \to Z_r(X_{k^{perf}})$ is not annihilated by any
fixed power of $p$.
\end{remark}





\section{Specialization of cycles}
\label{section-specialization}

\noindent
Let $R$ be a valuation ring with fraction field $K$ and residue field $\kappa$.
Let $X$ be a scheme locally of finite type over $R$. Let $r \geq 0$.
There is a specialization map
$$
sp_{X/R} : Z_r(X_K) \longrightarrow Z_r(X_\kappa)
$$
defined as follows. For an integral closed subscheme $Z \subset X_K$
of dimension $r$ we denote $\overline{Z}$ the scheme theoretic image
of $Z \to X$. Then we let $sp_{X/R}$ be the unique $\mathbf{Z}$-linear
map such that
$$
sp_{X/R}([Z]) = [\overline{Z}_\kappa]_r
$$
We briefly discuss why this is well defined. First, observe that the
morphism $X_K \to X$ is quasi-compact and hence the morphism $Z \to X$
is quasi-compact. Thus taking the scheme theoretic of $Z \to X$ commutes
with flat base change
(Morphisms, Lemma \ref{morphisms-lemma-flat-base-change-scheme-theoretic-image}.
In particular, base changing back to $X_K$ we see that $Z = \overline{Z}_K$.
Since $Z$ is integral, of course $\overline{Z}$ is integral too and
in fact is equal to the unique integral closed subscheme whose generic
point is the (image of the) generic point of $Z$. It follows from
Varieties, Lemma \ref{varieties-lemma-dominate-valuation-ring-dimension-fibres}
that $Z_\kappa$ is equidimensional of dimension $r$.

\begin{lemma}
\label{lemma-specialization-module}
Let $R$ be a valuation ring with fraction field $K$ and residue field $\kappa$.
Let $X$ be a scheme locally of finite type over $R$. Let $r \geq 0$.
Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module of finite type
flat over $R$. Assume $\dim(\text{Supp}(\mathcal{F}_K)) \leq r$.
Then $\dim(\text{Supp}(\mathcal{F}_\kappa)) \leq r$ and
$$
sp_{X/R}([\mathcal{F}_K]_r) = [\mathcal{F}_\kappa]_r
$$
\end{lemma}

\begin{proof}
The statement on dimension follows from More on Morphisms, Lemma
\ref{more-morphisms-lemma-relative-dimension-support-flat}.
Let $x$ be a generic point of an irreducible component
of $\text{Supp}(\mathcal{F}_\kappa)$. Let $Z \subset X_\kappa$
be the integral closed subscheme with generic point $x$.
Assume $\dim(Z) = r$. Let $A = \mathcal{O}_{X, x}$ and $N = \mathcal{F}_x$.
For an $R$-module $M$ we denote $\overline{M} = M/\mathfrak m M$
where $\mathfrak m \subset R$ is the maximal ideal.
Then $N$ is a finite $A$-module flat over $R$ such that
the support of $\overline{N}$ in $\Spec(\overline{A})$ is
consists of the closed point (or is empty).
The finite module $N_K$ over the Noetherian ring $A_K$
has finite support and hence has a finite filtration
$$
0 = N_{K, 0} \subset N_{K, 1} \subset \ldots \subset N_{K, n} = N_K
$$
by submodules such that $N_{K, i}/N_{K, i - i} \cong \kappa(y_i)$
where the $y_i$ are the generic points of the irreducible components
of $\text{Supp}(\mathcal{F}_K)$ of dimension $r$ which specialize to $x$.
Let $y_i$ correspond to the prime ideal $\mathfrak p_i \subset A$.
Unwinding the definitions we have to show
$$
\sum \text{length}_{\overline{A}}(\overline{A/\mathfrak p_i})
=
\text{length}_{\overline{A}}(\overline{N})
$$
Since $R$ is a valuation ring, we can find a filtration
$$
0 = N_0 \subset N_1 \subset \ldots \subset N_n = N
$$
by submodules such that $N_i/N_{i - 1}$ is $R$-flat for all $i$
and such that $N_{K, i} = (N_i)_K$ for all $i$.
Observe that each $N/N_i$ is a finite $A$-module flat over the
valuation ring $R$ and hence of finite presentation over $A$
(More on Flatness, Lemma \ref{}). Thus $N_i/N_{i - 1}$ is a
finite $A$-module too (Algebra, Lemma \ref{}). By flatness we see that
$\overline{N}$ has a filtration whose subquotients are
$\overline{N_i/N_{i - 1}}$. Thus it suffices to show that given
an $R$-flat finite $A$-module $M$ with $M_K = \kappa(\mathfrak q_i)$
we have
$$
A/\mathfrak q_i \cong M
$$
Namely, by Lemma \ref{} we can find $x \in M$ which does not map
to zero in $\overline{M}$. This gives an injective map
$A/\mathfrak q_i \to M$ whose cokernel is flat (Lemma \ref{})
and hence zero (take $\otimes K$).
\end{proof}

\begin{lemma}
\label{lemma-specialization-closed}
Let $R$ be a valuation ring with fraction field $K$ and residue field $\kappa$.
Let $X$ be a scheme locally of finite type over $R$. Let $r \geq 0$.
Let $W \subset X$ be a closed subscheme flat over $R$. Assume
$\dim(W_K) \leq r$. Then $\dim(W_\kappa) \leq r$ and
$$
sp_{X/R}([W_K]_r) = [W_\kappa]_r
$$
\end{lemma}

\begin{proof}
Taking $\mathcal{F} = \mathcal{O}_W$ this is a special case of
Lemma \ref{lemma-specialization-module}. See
Chow Homology, Lemma \ref{chow-lemma-cycle-closed-coherent}.
\end{proof}

\begin{lemma}
\label{lemma-specialization-extension}
Let $R'/R$ be an extension of valuation rings inducing fraction field
extension $K'/K$ and residue field extension $\kappa'/\kappa$
(More on Algebra, Definition
\ref{more-algebra-definition-extension-valuation-rings}).
Let $X$ be locally of finite type over $R$. Denote $X' = X_{R'}$.
Then the diagram
$$
\xymatrix{
Z_r(X'_{K'}) \ar[rr]_{sp_{X'/R'}} & & X'_{\kappa'} \\
Z_r(X_K) \ar[rr]^{sp_{X/R}} \ar[u] & & X_\kappa \ar[u]
}
$$
where $r \geq 0$ and the vertical arrows are base change maps.
\end{lemma}

\begin{proof}
Observe that $X'_{K'} = X_{K'} = X_K \times_{\Spec(K)} \Spec(K')$
and similarly for closed fibres, so that the vertical arrows indeed
make sense (see Section \ref{section-relative-fields}).
Now if $Z \subset X_K$ is an integral closed subscheme with
scheme theoretic image $\overline{Z} \subset X$, then we see that
$Z_{K'} \subset X_{K'}$ is a closed subscheme with scheme theoretic
image $\overline{Z}_{R'} \subset X_{R'}$. The base change of
$[Z]$ is $[Z_{K'}]_r = [\overline{Z}_{K'}]_r$ by definition. We have
$$
sp_{X/R}([Z]) = [\overline{Z}_\kappa]_r
\quad\text{and}\quad
sp_{X'/R'}([\overline{Z}_{K'}]_r) = [(\overline{Z}_{R'})_{\kappa'}]_r
$$
by Lemma \ref{lemma-specialization-module}. Since
$(\overline{Z}_{R'})_{\kappa'} = (\overline{Z}_\kappa)_{\kappa'}$
we conclude.
\end{proof}







\section{Families of cycles on fibres}
\label{section-cycles-fibres}

\noindent
Let $f : X \to S$ be a morphism of schemes which is locally of finite type.
Let $r \geq 0$ be an integer. A {\it family of $r$-cycles on fibres}
$\alpha$ is a family
$$
\alpha = (\alpha_s)_{s \in S}
$$
indexed by the points $s$ of the scheme $S$ where
$$
\alpha_s \in Z_r(X_{\kappa(s)^{perf}})
\quad\text{with}\quad
X_{\kappa(s)^{perf}} = X_s \times_{\Spec(\kappa(s))} \Spec(\kappa(s)^{perf})
$$
is an $r$ cycle on the scheme theoretic fibre over the perfection of
the residue field. There are various constructions we can perform on
families of $r$-cycles on fibres.

\medskip\noindent
Base change. Let
$$
\xymatrix{
X' \ar[r] \ar[d] & X \ar[d] \\
S' \ar[r]^g & S
}
$$
be a catesian square of morphisms of schemes with $f$ locally of finite type.
Let $r \geq 0$ be an integer. Given a family of $r$-cycles $\alpha$
on $X/S$ we define the {\it base change} $g^*\alpha$ of $\alpha$
to be the family
$$
g^*\alpha = (\alpha'_{s'})_{s' \in S'}
$$
where $\alpha'_{s'} \in Z_r(X'_{\kappa(s')^{perf}})$ is the base change
(or pullback) of the cycle $\alpha_s$ with $s' = g(s)$ as in
Section \ref{section-relative-fields} via the identitification
$$
X'_{\kappa(s')^{perf}} =
X_{\kappa(s)^{perf}} \times_{\Spec(\kappa(s)^{perf})} \Spec(\kappa(s')^{perf})
$$
of scheme theoretic fibres.

\medskip\noindent
Restriction. Let $f : X \to S$ be a morphism of schemes which is locally
of finite type. Let $r \geq 0$ be an integer. Let $U \subset X$ be an open
subscheme. Given a family of $r$-cycles $\alpha$ on $X/S$ we can define
the {\it restriction} $\alpha|_U$ of $\alpha$ to be the family
$$
\alpha|_U = (\alpha_s|_{U_{\kappa(s)^{perf}}})_{s \in S}
$$
of restrictions to scheme theoretic fibres.

\medskip\noindent
Flat pullback. Let $f : X \to S$ be a morphism of schemes which is locally
of finite type. Let $r \geq 0$ be an integer. Let $h : X' \to X$ be a
flat morphism, locally of finite type, and of relative dimension $e$.
Let $r \geq 0$ be an integer. Given a family of $r$-cycles $\alpha$
on $X/S$ we define the {\it flat pullback} $h^*\alpha$ of $\alpha$
to be the family of $(r + e)$-cycles on fibres
$$
h^*\alpha = (\alpha'_s)_{s \in S}
$$
where $\alpha'_s \in Z_{r + e}(X'_{\kappa(s)^{perf}})$ is the flat pullback
of the cycle $\alpha_s$ in $Z_r(X_{\kappa(s)^{perf}})$ by the flat morphism
$f_{\kappa(s)^{perf}} : X_{\kappa(s)^{perf}} \to X_{\kappa(s)^{perf}}$
of scheme theoretic fibres.

\begin{lemma}
\label{lemma-pullback-universally-bijective}
Let $g : S' \to S$ be a universally bijective morphism of schemes.
Let $f : X \to S$ be locally of finite type. Set $X' = S' \times_S X$.
Let $r \geq 0$. Then base change by $g$ determines a bijection
between the group of families of $r$-cycles $\alpha$ on $X/S$ and
the group of families of $r$-cycles $\alpha$ on $X'/S'$.
\end{lemma}

\begin{proof}
Holds because $g$ induces a bijection on points and isomorphisms
on perfect closures of residue fields.
\end{proof}

\begin{example}
\label{example-family-associated-module}
Let $f : X \to S$ be a morphism of schemes which is locally of finite type.
Let $r \geq 0$ be an integer. Let $\mathcal{F}$ be a quasi-coherent
$\mathcal{O}_X$-module of finite type. For $s \in S$ denote $\mathcal{F}_s$
and $\mathcal{F}_{\kappa(s)^{perf}}$
the pullback of $\mathcal{F}$ to $X_s$ and $X_{\kappa(s)^{perf}}$.
Assume $\dim(\text{Supp}(\mathcal{F}_s)) \leq r$ for all $s \in S$.
Then we can associate to $\mathcal{F}$ the family of relative
$r$-cycles $[\mathcal{F}/X/S]_r$ defined by the formula
$$
[\mathcal{F}/X/S]_r = ([\mathcal{F}_{\kappa(s)^{perf}}]_r)_{s \in S}
$$
where $[\mathcal{F}_{\kappa(s)^{perf}}]_r$ is given by
Chow Homology, Definition
\ref{chow-definition-cycle-associated-to-coherent-sheaf}.
\end{example}

\begin{lemma}
\label{lemma-family-associated-module}
The construction in Example \ref{example-family-associated-module}
is compatible with base change, restriction,
and flat pullback.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{example}
\label{example-family-associated-closed}
Let $f : X \to S$ be a morphism of schemes which is locally of finite type.
Let $r \geq 0$ be an integer. Let $Z \subset X$ be a closed subscheme.
For $s \in S$ denote $Z_s$ and $Z_{\kappa(s)^{perf}}$
the inverse image of $Z$ in $X_s$ and $X_{\kappa(s)^{perf}}$.
Assume $\dim(Z_s) \leq r$ for all $s \in S$.
Then we can associate to $Z$ the family of relative
$r$-cycles $[Z/X/S]_r$ defined by the formula
$$
[Z/X/S]_r = ([Z_{\kappa(s)^{perf}}]_r)_{s \in S}
$$
where $[Z_{\kappa(s)^{perf}}]_r$ is given by
Chow Homology, Definition
\ref{chow-definition-cycle-associated-to-closed-subscheme}.
\end{example}

\begin{lemma}
\label{lemma-family-associated-closed}
The construction in Example \ref{example-family-associated-closed}
is compatible with base change, restriction,
and flat pullback.
\end{lemma}

\begin{proof}
Taking $\mathcal{F} = \mathcal{O}_Z$ this is a special case of
Lemma \ref{lemma-family-associated-module}. See
Chow Homology, Lemma \ref{chow-lemma-cycle-closed-coherent}.
\end{proof}











\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
